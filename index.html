<!DOCTYPE html>
<html lang="en">
<head>

  <meta charset="utf-8">
  <title>The YumRepos Repository :o)</title>
  <meta name="description" content="Repository for the YumRepos Packages">
  <meta name="author" content="Arne Hilmann <arne.hilmann@gmail.com>">

  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link href="https://fonts.googleapis.com/css?family=Raleway:400,300,600" rel="stylesheet" type="text/css">

  <link rel="stylesheet" href="css/normalize.css">
  <link rel="stylesheet" href="css/skeleton.css">

  <link rel="icon" type="image/png" href="images/favicon.png">

</head>
<body>

  <div class="container">
    <div class="row">
      <div class="column" style="margin-top: 10%; margin-bottom: 20%;">

        <h2>YumRepos Repo</h2>
        <p>
        This is a yum repository for the yumrepos rpms and its centos7 configuration!
        </p>

        <h4>Prerequisites</h4>
        <p>
        <ul>
            <li>centos7 machine, including root access and internet access</li>
        </ul>
        </p>

        <h4>Installation</h4>
        <p>
        <ol>
            <li>enable epel repos and yum utilities(as root user):<br/><code>yum install epel-release yum-utils</code></li>
            <li>enable this repo:<br/>
                <code>yum-config-manager --add-repo https://arnehilmann.github.io/yumrepos/yumrepos.repo</code></li>
            <li>install yumrepos configuration for centos7:<br/><code>yum install yumrepos-behind-nginx-on-centos7</code></li>
        </ol>
        </p>

        <h4>First Usage</h4>
        <h5>on yumrepos server, as root</h5>
        <p>
        generate a key/secret pair with
            <code>generate-yumrepos-key-pair</code>, follow instructions to store these credentials
        </p>

        <h5>on some client trying to use the new yumrepos server, as any user with credentials</h5>
        <p>
        <ol>
            <li>create toplevel <code>foo</code> repository:
                <code>curl -k -K yumrepos.credentials https://[YUMREPOS_SERVER]/admin/v1/repos/foo -X PUT</code></li>
            <li>upload first rpm:
                <code>curl -k -K yumrepos.credentials https://[YUMREPOS_SERVER]/admin/v1/repos/foo -F rpm=@[YOUR_RPM_FILE]</code></li>
            <li>check repo via <a href="/repos/foo">web browser</a></li>
            <li>update repo metadata:<br/>
                <code>curl -k -K yumrepos.credentials https://[YUMREPOS_SERVER]/admin/v1/update</code></li>
            <li>check repo via <code>yum</code> (finally):
                <ul>
                    <li>save the following config as <code>foo.repo</code>:
                        <pre><code>[foo]
name=the foo repo
baseurl=https://[YUMREPOS_SERVER]/repos/foo
gpgcheck=0
enabled=1
sslverify=0</code></pre>
                    </li>
                    <li>
                        <code>yum -c foo.repo search [YOUR_RPM_FILE]</code>
                    </li>
                </ul>
            </li>
            <li><b>Tadahh!</b>
        </ol>
        </p>

        <h4>Further Questions/Comments?</h4>
        <p>
        Have a look at the <a href="https://github.com/arnehilmann/yumrepos#rest-api">API</a>.<br/>
        And See the <a href="https://github.com/arnehilmann/yumrepos">admin part</a>
        or the <a href="https://github.com/arnehilmann/yumrepos-behind-nginx-on-centos7">centos7-specific configuration</a>
        of this installation.
        </p>
      </div>
    </div>
  </div>

</body>
</html>
<html>
